<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. Metadata stores &mdash; deegree webservices ${project.version} documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '${project.version}',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="deegree webservices ${project.version} documentation" href="index.html" />
    <link rel="next" title="10. Map layers" href="layers.html" />
    <link rel="prev" title="8. Coverage stores" href="coveragestores.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          deegree webservices</a>
        <span class="navbar-text navbar-version pull-left"><b>${project.version}</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lightly.html">3. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">4. Configuration basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservices.html">5. Web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="featurestores.html">6. Feature stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="tilestores.html">7. Tile stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="coveragestores.html">8. Coverage stores</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">9. Metadata stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="layers.html">10. Map layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">11. Map themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderstyles.html">12. Map styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="filterencoding.html">13. Filter Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverconnections.html">14. Server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="processproviders.html">15. Process providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="crs.html">16. Coordinate reference systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi.html">17. deegree REST interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="javamodules.html">18. Java modules and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdal.html">19. GDAL components</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">9. Metadata stores</a><ul>
<li><a class="reference internal" href="#memory-iso-metadata-store">9.1. Memory ISO Metadata store</a></li>
<li><a class="reference internal" href="#sql-iso-metadata-store">9.2. SQL ISO Metadata store</a></li>
<li><a class="reference internal" href="#sql-ebrim-eo-metadata-store">9.3. SQL EBRIM/EO Metadata store</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="coveragestores.html" title="Previous Chapter: 8. Coverage stores"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 8. Coverage stor...</span>
    </a>
  </li>
  <li>
    <a href="layers.html" title="Next Chapter: 10. Map layers"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">10. Map layers &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/metadatastores.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="metadata-stores">
<span id="anchor-configuration-metadatastore"></span><h1>9. Metadata stores<a class="headerlink" href="#metadata-stores" title="Permalink to this headline">¶</a></h1>
<p>Metadata stores are data stores that provide access to metadata records. The two common use cases for metadata stores are:</p>
<ul class="simple">
<li>Accessing via CSW</li>
<li>Providing of metadata for web service resources (TBD)</li>
</ul>
<p>The remainder of this chapter describes some relevant terms and the metadata store configuration files in detail. You can access this configuration level by clicking on the <strong>metadata stores</strong> link in the administration console. The configuration files are located in the <strong>datasources/metadata/</strong> directory of the deegree workspace.</p>
<div class="figure" style="width: 80%">
<a class="reference external image-reference" href="_images/workspace-overview-metadata.png"><img alt="_images/workspace-overview-metadata.png" src="_images/workspace-overview-metadata.png" style="width: 80%;" /></a>
<p class="caption">Metadata store resources provide access to metadata records</p>
</div>
<div class="section" id="memory-iso-metadata-store">
<h2>9.1. Memory ISO Metadata store<a class="headerlink" href="#memory-iso-metadata-store" title="Permalink to this headline">¶</a></h2>
<p>The memory ISO metadata store implementation is transactional and works file based.</p>
<p>The memory metadata store configuration is defined by schema file <a class="reference external" href="http://schemas.deegree.org/datasource/metadata/iso19139/3.2.0/memory.xsd">http://schemas.deegree.org/datasource/metadata/iso19139/3.2.0/memory.xsd</a></p>
<div class="topic">
<p class="topic-title first">Memory ISO Metadatastore config (skeleton)</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;ISOMemoryMetadataStore</span> 
  <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/metadata/iso19139/memory&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> 
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.deegree.org/datasource/metadata/iso19139/memory</span>
<span class="s">  memory.xsd&quot;</span>
  <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- [1...n] directory to be used --&gt;</span>
  <span class="nt">&lt;ISORecordDirectory&gt;</span>..<span class="nt">&lt;/ISORecordDirectory&gt;</span>
  <span class="c">&lt;!-- [0...1] directory to be used to insert records --&gt;</span>
  <span class="nt">&lt;InsertDirectory&gt;</span>..<span class="nt">&lt;/InsertDirectory&gt;</span>
<span class="nt">&lt;/ISOMemoryMetadataStore&gt;</span>
</pre></div>
</div>
</div>
<p>The root element has to be <tt class="docutils literal"><span class="pre">ISOMemoryMetadataStore</span></tt> and the config attribute must be <tt class="docutils literal"><span class="pre">3.2.0</span></tt>. The only mandatory element is:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ISORecordDirectory</span></tt>: A list of directories containing records loaded in the store during start of the store.</li>
</ul>
<p>To allow insert transactions one optional element must be declared:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">InsertDirectory</span></tt>: Directory to store inserted records, can be one of the directories declared in the element <tt class="docutils literal"><span class="pre">ISORecordDirectory</span></tt>.</li>
</ul>
</div>
<div class="section" id="sql-iso-metadata-store">
<h2>9.2. SQL ISO Metadata store<a class="headerlink" href="#sql-iso-metadata-store" title="Permalink to this headline">¶</a></h2>
<p>The SQL ISO metadata store implementation currently supports the following backends:</p>
<ul class="simple">
<li>PostgreSQL (8.3, 8.4, 9.0, 9.1, 9.2) with PostGIS extension (1.4, 1.5, 2.0)</li>
<li>Oracle Spatial (10g, 11g)</li>
<li>Microsoft SQL Server (2008, 2012)</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you want to use the SQL ISO metadata store with Oracle or Microsoft SQL Server, you will need to add additional modules first. This is described in <a class="reference internal" href="javamodules.html#anchor-db-libraries"><em>Adding database modules</em></a>.</p>
</div>
<p>The SQL metadata store configuration is defined by schema file <a class="reference external" href="http://schemas.deegree.org/datasource/metadata/iso19115/3.2.0/iso19115.xsd">http://schemas.deegree.org/datasource/metadata/iso19115/3.2.0/iso19115.xsd</a></p>
<div class="topic">
<p class="topic-title first">SQL ISO Metadatastore config (skeleton)</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ISOMetadataStore</span>
  <span class="na">configVersion=</span><span class="s">&quot;3.0.0&quot;</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/metadata/iso19115&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.deegree.org/datasource/metadata/iso19115 </span>
<span class="s">  http://schemas.deegree.org/datasource/metadata/iso19115/3.0.0/iso19115.xsd&quot;</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- [1] Identifier of JDBC connection --&gt;</span>
  <span class="nt">&lt;JDBCConnId&gt;</span>conn1<span class="nt">&lt;/JDBCConnId&gt;</span>
  
  <span class="c">&lt;!-- [0..1] Definition of the Inspectors for checking the metadata for insert </span>
<span class="c">       or update transaction --&gt;</span>
  <span class="nt">&lt;Inspectors&gt;</span>
  
    <span class="c">&lt;!-- [0..1] Checks the fileIdentifier --&gt;</span>
  <span class="nt">&lt;FileIdentifierInspector</span> <span class="na">rejectEmpty=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
  
  <span class="nt">&lt;/Inspectors&gt;</span>
 
  <span class="c">&lt;!-- [0..1] Specifies the content of the queryable property &#39;anyText&#39; --&gt;</span>
  <span class="nt">&lt;AnyText&gt;</span>
  
    <span class="c">&lt;!-- [0..1] Set of XPath-expression (remove line breaks in xpaths!) --&gt;</span>
    <span class="nt">&lt;Custom&gt;</span>
      <span class="nt">&lt;XPath&gt;</span>/gmd:MD_Metadata/gmd:identificationInfo/
              gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/
              gmd:keyword/gco:CharacterString<span class="nt">&lt;/XPath&gt;</span>
      <span class="nt">&lt;XPath&gt;</span>/gmd:MD_Metadata/gmd:contact/gmd:CI_ResponsibleParty/
              gmd:individualName/gco:CharacterString<span class="nt">&lt;/XPath&gt;</span>
    <span class="nt">&lt;/Custom&gt;</span>
    
  <span class="nt">&lt;/AnyText&gt;</span>
  
<span class="nt">&lt;/ISOMetadataStore&gt;</span>
</pre></div>
</div>
</div>
<p>The root element has to be <tt class="docutils literal"><span class="pre">ISOMetadataStore</span></tt> and the config attribute must be <tt class="docutils literal"><span class="pre">3.2.0</span></tt>. The only mandatory element is:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">JDBCConnId</span></tt>: Id of the JDBC connection to use (see ...)</li>
</ul>
<p>The optional elements are:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">Inspectors</span></tt>: List of inspectors inspecting a metadataset before inserting. Known inspectors are:</p>
<ul class="simple">
<li>FileIdentifierInspector</li>
<li>InspireInspector</li>
<li>CoupledResourceInspector</li>
<li>SchemaValidator</li>
<li>NamespaceNormalizer</li>
</ul>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AnyText</span></tt>: Configuration of the values searchable by the queryable property <tt class="docutils literal"><span class="pre">AnyText</span></tt>, possible values are:</p>
<ul class="simple">
<li>All: all values</li>
<li>Core: the core queryable properties (default)</li>
<li>Custom: a custom set of properties defined as xpath expressions</li>
</ul>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">QueryableProperties</span></tt>: Configuration of additional query properties. Detailed informations can be found in the following example:</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre>  ...
  
  <span class="nt">&lt;QueryableProperties&gt;</span>
    <span class="c">&lt;!-- can contain multiple elements &#39;QueryableProperty&#39; --&gt;</span> 
    <span class="c">&lt;!-- set attribute isMultiple=&quot;true&quot; if the xpath links </span>
<span class="c">         to a property which can occur multiple times--&gt;</span>
    <span class="nt">&lt;QueryableProperty</span> <span class="na">isMultiple=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- configures the xpath to the element which shoud be queryable </span>
<span class="c">           (remove line breaks in xpaths!)--&gt;</span>
      <span class="nt">&lt;xpath&gt;</span>//gmd:MD_Metadata/gmd:identificationInfo/
             gmd:MD_DataIdentification/gmd:spatialRepresentationType/
             gmd:MD_SpatialRepresentationTypeCode/@codeListValue<span class="nt">&lt;/xpath&gt;</span>
      <span class="c">&lt;!-- namespace and name to use in a filter expression, e.g </span>
<span class="c">        &lt;ogc:PropertyName xmlns:apiso=&quot;http://www.opengis.net/cat/csw/apiso/1.0&quot;&gt;</span>
<span class="c">               apiso:SpatialRepresentationType&lt;/ogc:PropertyName&gt; --&gt;</span>
      <span class="nt">&lt;name</span> <span class="na">namespace=</span><span class="s">&quot;http://www.opengis.net/cat/csw/apiso/1.0&quot;</span><span class="nt">&gt;</span>
           SpatialRepresentationType<span class="nt">&lt;/name&gt;</span>
      <span class="c">&lt;!-- Name of the column in the table idxt_main where the valus of a record</span>
<span class="c">           should be stored, must be added manually --&gt;</span> 
      <span class="nt">&lt;column&gt;</span>spatialRepType<span class="nt">&lt;/column&gt;</span>
    <span class="nt">&lt;/QueryableProperty&gt;</span>
  <span class="nt">&lt;/QueryableProperties&gt;</span>
  
  ...
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">If a new queryable property is added or the AnyText value changed the inserted metadata records are not adjusted to this changes! This means for the example above that an existing record with SpatialRepresentationType &#8216;raster&#8217; is not found by searching for all records with this type until the record is inserted or updated again!</p>
</div>
</div>
<div class="section" id="sql-ebrim-eo-metadata-store">
<h2>9.3. SQL EBRIM/EO Metadata store<a class="headerlink" href="#sql-ebrim-eo-metadata-store" title="Permalink to this headline">¶</a></h2>
<p>TBD</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, The deegree project.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>