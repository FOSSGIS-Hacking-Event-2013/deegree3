<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>17. deegree REST interface &mdash; deegree webservices ${project.version} documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '${project.version}',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="deegree webservices ${project.version} documentation" href="index.html" />
    <link rel="next" title="18. Java modules and libraries" href="javamodules.html" />
    <link rel="prev" title="16. Coordinate reference systems" href="crs.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          deegree webservices</a>
        <span class="navbar-text navbar-version pull-left"><b>${project.version}</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lightly.html">3. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">4. Configuration basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservices.html">5. Web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="featurestores.html">6. Feature stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="tilestores.html">7. Tile stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="coveragestores.html">8. Coverage stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadatastores.html">9. Metadata stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="layers.html">10. Map layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">11. Map themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderstyles.html">12. Map styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="filterencoding.html">13. Filter Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverconnections.html">14. Server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="processproviders.html">15. Process providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="crs.html">16. Coordinate reference systems</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">17. deegree REST interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="javamodules.html">18. Java modules and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdal.html">19. GDAL components</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">17. deegree REST interface</a><ul>
<li><a class="reference internal" href="#setting-up-the-interface">17.1. Setting up the interface</a></li>
<li><a class="reference internal" href="#detailed-explanation">17.2. Detailed explanation</a><ul>
<li><a class="reference internal" href="#downloading">17.2.1. Downloading</a></li>
<li><a class="reference internal" href="#restarting">17.2.2. Restarting</a></li>
<li><a class="reference internal" href="#listing">17.2.3. Listing</a></li>
<li><a class="reference internal" href="#storing">17.2.4. Storing</a></li>
<li><a class="reference internal" href="#deleting">17.2.5. Deleting</a></li>
<li><a class="reference internal" href="#invalidating-tile-store-caches">17.2.6. Invalidating tile store caches</a></li>
<li><a class="reference internal" href="#crs-queries">17.2.7. CRS queries</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="crs.html" title="Previous Chapter: 16. Coordinate reference systems"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 16. Coordinate r...</span>
    </a>
  </li>
  <li>
    <a href="javamodules.html" title="Next Chapter: 18. Java modules and libraries"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">18. Java modules... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/restapi.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="deegree-rest-interface">
<span id="anchor-configuration-restapi"></span><h1>17. deegree REST interface<a class="headerlink" href="#deegree-rest-interface" title="Permalink to this headline">¶</a></h1>
<p>deegree offers a REST like web interface to access and configure the deegree workspace. You can use it to alter configuration, restart workspaces or resources and start a different workspace.</p>
<div class="section" id="setting-up-the-interface">
<h2>17.1. Setting up the interface<a class="headerlink" href="#setting-up-the-interface" title="Permalink to this headline">¶</a></h2>
<p>The servlet that handles the REST interface is already running if you use the standard <tt class="docutils literal"><span class="pre">web.xml</span></tt> deployment descriptor. For security reasons, you&#8217;ll need to add a user with the role <tt class="docutils literal"><span class="pre">deegree</span></tt> to your Tomcat configuration, eg. by adding an appropriate line to the <tt class="docutils literal"><span class="pre">conf/tomcat-users.xml</span></tt> file.</p>
<p>Once you did that, you can get an overview of available &#8216;commands&#8217; by requesting <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config</span></tt>. You&#8217;ll need to provide the username/password you configured in your Tomcat configuration.</p>
<p>Here&#8217;s an example output:</p>
<div class="highlight-python"><div class="highlight"><pre>No action specified.

Available actions:
GET /config/download[/path]                                  - download currently running workspace or file in workspace
GET /config/download/wsname[/path]                           - download workspace with name &lt;wsname&gt; or file in workspace
GET /config/restart                                          - restart currently running workspace
GET /config/restart[/path]                                   - restarts all resources connected to the specified one
GET /config/restart/wsname                                   - restart with workspace &lt;wsname&gt;
GET /config/listworkspaces                                   - list available workspace names
GET /config/list[/path]                                      - list currently running workspace or directory in workspace
GET /config/list/wsname[/path]                               - list workspace with name &lt;wsname&gt; or directory in workspace
GET /config/invalidate/datasources/tile/id/matrixset[?bbox=] - invalidate part or all of a tile store cache&#39;s tile matrix set
GET /config/crs/list                                         - list available CRS definitions
POST /config/crs/getcodes with wkt=&lt;wkt&gt;                     - retrieves a list of CRS codes corresponding to the WKT (POSTed KVP)
GET /config/crs/&lt;code&gt;                                       - checks if a CRS definition is available, returns true/false
PUT /config/upload/wsname.zip                                - upload workspace &lt;wsname&gt;
PUT /config/upload/path/file                                 - upload file into current workspace
PUT /config/upload/wsname/path/file                          - upload file into workspace with name &lt;wsname&gt;
DELETE /config/delete[/path]                                 - delete currently running workspace or file in workspace
DELETE /config/delete/wsname[/path]                          - delete workspace with name &lt;wsname&gt; or file in workspace

HTTP response codes used:
200 - ok
403 - if you tried something you shouldn&#39;t have
404 - if a file or directory needed to fulfill a request was not found
500 - if something serious went wrong on the server side
</pre></div>
</div>
</div>
<div class="section" id="detailed-explanation">
<h2>17.2. Detailed explanation<a class="headerlink" href="#detailed-explanation" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s see how the commands work in detail. In general, you can specify a path relative to the workspace almost anywhere. With no path given, you act on the workspace, with a path given, you act on that part of the workspace.</p>
<div class="section" id="downloading">
<h3>17.2.1. Downloading<a class="headerlink" href="#downloading" title="Permalink to this headline">¶</a></h3>
<p>In order to download the complete workspace, you request <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/download</span></tt>. Since the workspace is made up of many files, you get a <tt class="docutils literal"><span class="pre">.zip</span></tt> file. If you just want to download the featurestore configuration named <tt class="docutils literal"><span class="pre">inspire</span></tt>, you request <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/download/datasources/feature/inspire.xml</span></tt>.</p>
<p>To use a different workspace instead of the currently running one, use <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/download/otherworkspace</span></tt> (you may also specify a file within that workspace).</p>
</div>
<div class="section" id="restarting">
<h3>17.2.2. Restarting<a class="headerlink" href="#restarting" title="Permalink to this headline">¶</a></h3>
<p>You can restart the currently running workspace using <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/restart</span></tt>, or start another workspace using <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/restart/anotherworkspace</span></tt>. To restart all resources connected a specific one use eg. <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/restart/datasources/feature/inspire</span></tt>.</p>
</div>
<div class="section" id="listing">
<h3>17.2.3. Listing<a class="headerlink" href="#listing" title="Permalink to this headline">¶</a></h3>
<p>You can see what workspaces are available to the deegree installation by running <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/listworkspaces</span></tt>.</p>
<p>You can also browse through a workspace&#8217;s files by requesting eg. <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/list/datasources/</span></tt>, or to see the files in a workspace other than the one currently running <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/list/someworkspace/services/</span></tt>.</p>
</div>
<div class="section" id="storing">
<h3>17.2.4. Storing<a class="headerlink" href="#storing" title="Permalink to this headline">¶</a></h3>
<p>You can update or add files in a workspace, or upload a completely new workspace by sending a HTTP PUT request.</p>
<p>To upload a new workspace, send a <tt class="docutils literal"><span class="pre">.zip</span></tt> file with the workspace contents to <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/upload/someworkspace.zip</span></tt>. This will extract the workspace as <tt class="docutils literal"><span class="pre">someworkspace</span></tt>. Note that there should not be a parent directory in the <tt class="docutils literal"><span class="pre">.zip</span></tt>, it should contain folders like <tt class="docutils literal"><span class="pre">datasources</span></tt> or <tt class="docutils literal"><span class="pre">service</span></tt> directly.</p>
<p>To upload individual files send requests against <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/upload/path/to/file.xml</span></tt>, or with a workspace name prefix as usual (<tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/upload/someworkspace/and/the/path/file.xml</span></tt>).</p>
</div>
<div class="section" id="deleting">
<h3>17.2.5. Deleting<a class="headerlink" href="#deleting" title="Permalink to this headline">¶</a></h3>
<p>Deletion works just like storing, except you send HTTP DELETE requests and instead of the <tt class="docutils literal"><span class="pre">upload</span></tt> path component you use <tt class="docutils literal"><span class="pre">delete</span></tt>. You can also delete whole directories with content by specifying just the path to the directory. Deleting workspaces is also possible, just specify the workspace name (without a <tt class="docutils literal"><span class="pre">.zip</span></tt> suffix).</p>
</div>
<div class="section" id="invalidating-tile-store-caches">
<h3>17.2.6. Invalidating tile store caches<a class="headerlink" href="#invalidating-tile-store-caches" title="Permalink to this headline">¶</a></h3>
<p>This is a special operation only possible for <tt class="docutils literal"><span class="pre">CachingTileStore</span></tt> resources. You can invalidate the whole cache, or just a part of it by requesting <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/invalidate/datasources/tile/configname/matrixsetname</span></tt>. You can specify a bounding box by appending it in the form <tt class="docutils literal"><span class="pre">?bbox=minx,miny,maxx,maxy</span></tt> (just like in WMS requests).</p>
</div>
<div class="section" id="crs-queries">
<h3>17.2.7. CRS queries<a class="headerlink" href="#crs-queries" title="Permalink to this headline">¶</a></h3>
<p>You can get a list of all available CRS definitions by requesting <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/crs/list</span></tt>. Check if a specific CRS is configured in deegree by requesting <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/crs/EPSG:12345</span></tt>. The response will be the text <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>, depending whether the CRS is defined or not. If you have a WKT CRS definition, you can POST against <tt class="docutils literal"><span class="pre">http://localhost:8080/deegree-webservices/config/crs/getcodes</span></tt> to get a list of corresponding identifiers (experimental). Use the <tt class="docutils literal"><span class="pre">wkt</span></tt> parameter when posting to send the WKT definition.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, The deegree project.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>