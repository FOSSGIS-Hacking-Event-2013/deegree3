<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>11. Map themes &mdash; deegree webservices ${project.version} documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '${project.version}',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="deegree webservices ${project.version} documentation" href="index.html" />
    <link rel="next" title="12. Map styles" href="renderstyles.html" />
    <link rel="prev" title="10. Map layers" href="layers.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          deegree webservices</a>
        <span class="navbar-text navbar-version pull-left"><b>${project.version}</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lightly.html">3. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">4. Configuration basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservices.html">5. Web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="featurestores.html">6. Feature stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="tilestores.html">7. Tile stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="coveragestores.html">8. Coverage stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadatastores.html">9. Metadata stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="layers.html">10. Map layers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">11. Map themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderstyles.html">12. Map styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="filterencoding.html">13. Filter Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverconnections.html">14. Server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="processproviders.html">15. Process providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="crs.html">16. Coordinate reference systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi.html">17. deegree REST interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="javamodules.html">18. Java modules and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdal.html">19. GDAL components</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">11. Map themes</a><ul>
<li><a class="reference internal" href="#standard-themes">11.1. Standard themes</a></li>
<li><a class="reference internal" href="#remote-wms-themes">11.2. Remote WMS themes</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="layers.html" title="Previous Chapter: 10. Map layers"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 10. Map layers</span>
    </a>
  </li>
  <li>
    <a href="renderstyles.html" title="Next Chapter: 12. Map styles"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">12. Map styles &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/themes.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="map-themes">
<span id="anchor-configuration-themes"></span><h1>11. Map themes<a class="headerlink" href="#map-themes" title="Permalink to this headline">¶</a></h1>
<p>A theme defines a tree like hierarchy, which at each node can contain a number of layers. For people familiar with WMS, a theme is basically a layer tree without the actual layer definition.</p>
<p>In deegree it is used to define a structure with layers to be used in service configurations, notably WMS and WMTS. The concept originated from the WMTS 1.0.0 specification, with a strong hunch that it might be used in subsequent WMS specifications as well (namely WMS 2.0.0).</p>
<p>To configure a theme, you should already have a couple of layers configured. Right now there are two types of theme configurations available. The most commonly used is the &#8216;standard&#8217; theme configuration, where you manually configure the structure. Another is a configuration which extracts a theme from a remote WMS resource&#8217;s layer tree.</p>
<p>A theme always has exactly one root node (theme). A theme can contain zero or more sub-themes, and zero or more layers.</p>
<div class="figure" style="width: 80%">
<a class="reference external image-reference" href="_images/workspace-overview-theme.png"><img alt="_images/workspace-overview-theme.png" src="_images/workspace-overview-theme.png" style="width: 80%;" /></a>
<p class="caption">Theme resources group layers into trees</p>
</div>
<div class="section" id="standard-themes">
<h2>11.1. Standard themes<a class="headerlink" href="#standard-themes" title="Permalink to this headline">¶</a></h2>
<p>The standard theme configuration is used to manually configure themes. One configuration can contain one or more themes. A theme configuration makes use of the common <a class="reference internal" href="layers.html#description"><em>Description metadata</em></a> and <a class="reference internal" href="layers.html#spatial"><em>Spatial metadata</em></a> elements described in the layer chapter. If the metadata is not specified, it will be copied from layers within the same node.</p>
<p>In order to reference layers, the theme configuration needs to know layer stores. That&#8217;s why the first thing you need to specify are the layer stores you intend to use:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Themes</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/themes/standard&quot;</span>
                              <span class="na">xmlns:d=</span><span class="s">&quot;http://www.deegree.org/metadata/description&quot;</span>
                              <span class="na">xmlns:s=</span><span class="s">&quot;http://www.deegree.org/metadata/spatial&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;LayerStoreId&gt;</span>layerstore<span class="nt">&lt;/LayerStoreId&gt;</span>
  <span class="nt">&lt;LayerStoreId&gt;</span>layerstore2<span class="nt">&lt;/LayerStoreId&gt;</span>
  <span class="nt">&lt;Theme&gt;</span>
  ...
  <span class="nt">&lt;/Theme&gt;</span>
  ...
<span class="nt">&lt;/Themes&gt;</span>
</pre></div>
</div>
<p>Let&#8217;s have a look at the actual theme configuration. First, you have the choice to give the theme an identifier or not. Then you can specify the description and spatial metadata (only the <tt class="docutils literal"><span class="pre">Title</span></tt> element is mandatory here). If it does not have an identifier, it will not be requestable in the service configuration:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Theme&gt;</span>
  <span class="nt">&lt;Identifier&gt;</span>roads<span class="nt">&lt;/Identifier&gt;</span>
  <span class="c">&lt;!-- common description elements here --&gt;</span>
  <span class="c">&lt;!-- common spatial metadata elements here --&gt;</span>
  ...
<span class="nt">&lt;/Theme&gt;</span>
</pre></div>
</div>
<p>After that, you can add layers and subthemes as required to the theme:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Theme&gt;</span>
  ...
  <span class="nt">&lt;Layer&gt;</span>roads<span class="nt">&lt;/Layer&gt;</span>
  <span class="nt">&lt;Layer</span> <span class="na">layerStore=</span><span class="s">&#39;layerstore2&#39;</span><span class="nt">&gt;</span>highways<span class="nt">&lt;/Layer&gt;</span>
  <span class="nt">&lt;Theme&gt;</span>
    ...
    <span class="nt">&lt;Theme&gt;</span>
      ...
    <span class="nt">&lt;/Theme&gt;</span>
  <span class="nt">&lt;/Theme&gt;</span>
<span class="nt">&lt;/Theme&gt;</span>
</pre></div>
</div>
<p>As you can see, you can optionally specify which layer store a given layer comes from. This can be useful if you have multiple layer stores offering a layer with the same name.</p>
<p>Since the names of the layers are not used when using WMS, this mechanism can be used to combine multiple layers (configuration wise) into one (WMS wise, in deegree terms it would be one theme with multiple layers).</p>
</div>
<div class="section" id="remote-wms-themes">
<h2>11.2. Remote WMS themes<a class="headerlink" href="#remote-wms-themes" title="Permalink to this headline">¶</a></h2>
<p>The remote WMS theme configuration can be used to extract a theme from a remote WMS resource&#8217;s layer tree. This is most commonly used when trying to cascade a whole WMS.</p>
<p>The configuration is very simple, you only need to specify the remote WMS resource you want to use, and the layer store from which layers should be extracted:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;RemoteWMSThemes</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/themes/remotewms&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.1.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;RemoteWMSId&gt;</span>d3<span class="nt">&lt;/RemoteWMSId&gt;</span>
  <span class="nt">&lt;LayerStoreId&gt;</span>d3<span class="nt">&lt;/LayerStoreId&gt;</span>
<span class="nt">&lt;/RemoteWMSThemes&gt;</span>
</pre></div>
</div>
<p>deegree will automatically add layers to the theme, if a corresponding layer exists in the layer store. In case the layer store is also configured based on the remote WMS used here, there will be a corresponding layer for each requestable layer from the remote WMS.</p>
<p>Using this kind of configuration, you can duplicate a complete WMS using 15 lines of configuration (3 for the remote WMS, 3 for the remote WMS layer store, 4 for the theme and 5 for the WMS).</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, The deegree project.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>