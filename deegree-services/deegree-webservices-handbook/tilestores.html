<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. Tile stores &mdash; deegree webservices ${project.version} documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '${project.version}',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="deegree webservices ${project.version} documentation" href="index.html" />
    <link rel="next" title="8. Coverage stores" href="coveragestores.html" />
    <link rel="prev" title="6. Feature stores" href="featurestores.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          deegree webservices</a>
        <span class="navbar-text navbar-version pull-left"><b>${project.version}</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lightly.html">3. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">4. Configuration basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservices.html">5. Web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="featurestores.html">6. Feature stores</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">7. Tile stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="coveragestores.html">8. Coverage stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadatastores.html">9. Metadata stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="layers.html">10. Map layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">11. Map themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderstyles.html">12. Map styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="filterencoding.html">13. Filter Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverconnections.html">14. Server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="processproviders.html">15. Process providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="crs.html">16. Coordinate reference systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi.html">17. deegree REST interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="javamodules.html">18. Java modules and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdal.html">19. GDAL components</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">7. Tile stores</a><ul>
<li><a class="reference internal" href="#tile-stores-tile-data-sets-and-tile-matrix-sets">7.1. Tile stores, tile data sets and tile matrix sets</a><ul>
<li><a class="reference internal" href="#pre-defined-tile-matrix-sets">7.1.1. Pre-defined tile matrix sets</a></li>
<li><a class="reference internal" href="#user-defined-tile-matrix-sets">7.1.2. User-defined tile matrix sets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#geotiff-tile-store">7.2. GeoTIFF tile store</a></li>
<li><a class="reference internal" href="#file-system-tile-store">7.3. File system tile store</a></li>
<li><a class="reference internal" href="#remote-wms-tile-store">7.4. Remote WMS tile store</a></li>
<li><a class="reference internal" href="#remote-wmts-tile-store">7.5. Remote WMTS tile store</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="featurestores.html" title="Previous Chapter: 6. Feature stores"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 6. Feature store...</span>
    </a>
  </li>
  <li>
    <a href="coveragestores.html" title="Next Chapter: 8. Coverage stores"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">8. Coverage stor... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tilestores.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="tile-stores">
<span id="anchor-configuration-tilestore"></span><h1>7. Tile stores<a class="headerlink" href="#tile-stores" title="Permalink to this headline">¶</a></h1>
<p>Tile stores are resources that provide access to pre-rendered map tiles. The common use case for tile stores is to provide data for tile layers.</p>
<p>The remainder of this chapter describes some relevant terms and the tile store configuration files in detail. You can access this configuration level by clicking on the <strong>tile stores</strong> link in the administration console. The configuration files are located in the <strong>datasources/tile/</strong> directory of the deegree workspace.</p>
<div class="figure" style="width: 80%">
<a class="reference external image-reference" href="_images/workspace-overview-tile.png"><img alt="_images/workspace-overview-tile.png" src="_images/workspace-overview-tile.png" style="width: 80%;" /></a>
<p class="caption">Tile store resources provide access to pre-rendered map tiles</p>
</div>
<div class="section" id="tile-stores-tile-data-sets-and-tile-matrix-sets">
<h2>7.1. Tile stores, tile data sets and tile matrix sets<a class="headerlink" href="#tile-stores-tile-data-sets-and-tile-matrix-sets" title="Permalink to this headline">¶</a></h2>
<p>A tile store is what you configure in a single tile store configuration file. It defines one or more (stored) tile data sets. Other resources such as the tile layer configuration usually refer to a specific tile data set from a tile store.</p>
<p>The structure of a tile data set is determined by specifying the identifier of a tile matrix set. Most often, one wants to define tile data sets that conform to a pre-defined tile matrix set. In that case, one only has to provide the tile store configuration file.</p>
<p>The term tile matrix set has been coined deliberately to coincide with the same term from the <a class="reference external" href="http://www.opengeospatial.org/standards/wmts">WMTS specification</a> and refers to structure and spatial properties of the tile matrix. The tile matrix sets (or &#8220;quads&#8221;) from WMTS 1.0.0 and INSPIRE ViewService 3.1 specifications are already predefined, but additional tile matrix sets may be defined as well (see below).</p>
<p>Take note that it is not necessary to provide actual tiles for all tiles defined within the tile matrix set, a tile data set may contain a subset. The only requirement is that you need to fulfill the structure requirements (CRS, size of tiles, position of tiles in world coordinates, scale).</p>
<div class="section" id="pre-defined-tile-matrix-sets">
<h3>7.1.1. Pre-defined tile matrix sets<a class="headerlink" href="#pre-defined-tile-matrix-sets" title="Permalink to this headline">¶</a></h3>
<p>The following table lists the tile matrix sets that are pre-defined in deegree:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="17%" />
<col width="35%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Workspace identifier</th>
<th class="head">Name in specification</th>
<th class="head">URN</th>
<th class="head">Specification document</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>globalcrs84scale</td>
<td>GlobalCRS84Scale</td>
<td><a class="reference external" href="urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Scale">urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Scale</a></td>
<td>OGC WMTS 1.0.0</td>
</tr>
<tr class="row-odd"><td>globalcrs84pixel</td>
<td>GlobalCRS84Pixel</td>
<td><a class="reference external" href="urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Pixel">urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Pixel</a></td>
<td>OGC WMTS 1.0.0</td>
</tr>
<tr class="row-even"><td>googlecrs84quad</td>
<td>GoogleCRS84Quad</td>
<td><a class="reference external" href="urn:ogc:def:crs:OGC:1.3:CRS84">urn:ogc:def:crs:OGC:1.3:CRS84</a></td>
<td>OGC WMTS 1.0.0</td>
</tr>
<tr class="row-odd"><td>googlemapscompatible</td>
<td>GoogleMapsCompatible</td>
<td><a class="reference external" href="urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible">urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible</a></td>
<td>OGC WMTS 1.0.0</td>
</tr>
<tr class="row-even"><td>inspirecrs84quad</td>
<td>InspireCRS84Quad</td>
<td>n/a</td>
<td>INSPIRE View Service Specification 3.1</td>
</tr>
</tbody>
</table>
<p>You can override these standard definitions by placing an appropriately named file into the <tt class="docutils literal"><span class="pre">datasources/tile/tilematrixset/</span></tt> directory of your workspace. It is recommended to always use lower case file names to avoid confusion.</p>
</div>
<div class="section" id="user-defined-tile-matrix-sets">
<h3>7.1.2. User-defined tile matrix sets<a class="headerlink" href="#user-defined-tile-matrix-sets" title="Permalink to this headline">¶</a></h3>
<p>There are currently two ways to configure tile matrix sets. The first way is to state the structure of the matrices explicitly (described here), the second will extract the structure from a tiled GeoTIFF (BIGTIFF) file (possibly with overlays, described in the GeoTIFF section).</p>
<p>Like everything else in the deegree workspace, defining a tile matrix set means placing a configuration file into a standard location, in this case the <tt class="docutils literal"><span class="pre">datasources/tile/tilematrixset</span></tt> directory.</p>
<p>Let&#8217;s have a look at an example for the explicit configuration:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;TileMatrixSet</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/tilematrixset&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;CRS&gt;</span>urn:ogc:def:crs:OGC:1.3:CRS84<span class="nt">&lt;/CRS&gt;</span>

  <span class="nt">&lt;TileMatrix&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>1e6<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;ScaleDenominator&gt;</span>1e6<span class="nt">&lt;/ScaleDenominator&gt;</span>
    <span class="nt">&lt;TopLeftCorner&gt;</span>-180 84<span class="nt">&lt;/TopLeftCorner&gt;</span>
    <span class="nt">&lt;TileWidth&gt;</span>256<span class="nt">&lt;/TileWidth&gt;</span>
    <span class="nt">&lt;TileHeight&gt;</span>256<span class="nt">&lt;/TileHeight&gt;</span>
    <span class="nt">&lt;MatrixWidth&gt;</span>60000<span class="nt">&lt;/MatrixWidth&gt;</span>
    <span class="nt">&lt;MatrixHeight&gt;</span>50000<span class="nt">&lt;/MatrixHeight&gt;</span>
  <span class="nt">&lt;/TileMatrix&gt;</span>
  <span class="nt">&lt;TileMatrix&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>2.5e6<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;ScaleDenominator&gt;</span>2.5e6<span class="nt">&lt;/ScaleDenominator&gt;</span>
    <span class="nt">&lt;TopLeftCorner&gt;</span>-180 84<span class="nt">&lt;/TopLeftCorner&gt;</span>
    <span class="nt">&lt;TileWidth&gt;</span>256<span class="nt">&lt;/TileWidth&gt;</span>
    <span class="nt">&lt;TileHeight&gt;</span>256<span class="nt">&lt;/TileHeight&gt;</span>
    <span class="nt">&lt;MatrixWidth&gt;</span>9000<span class="nt">&lt;/MatrixWidth&gt;</span>
    <span class="nt">&lt;MatrixHeight&gt;</span>7000<span class="nt">&lt;/MatrixHeight&gt;</span>
  <span class="nt">&lt;/TileMatrix&gt;</span>

<span class="nt">&lt;/TileMatrixSet&gt;</span>
</pre></div>
</div>
<p>As you can see, the format is almost identical to the one from the WMTS capabilities documents. A tile matrix set is always defined for a single coordinate system, and contains one or more tile matrices. Each tile matrix has an identifier, a specific scale, an origin (the top left corner in world coordinates), defines a tile width/height in pixels and specifies how many tiles there are in x and y direction.</p>
<p>You do not need to explicitly specify the envelope, it will be calculated automatically from the values you provide. Keep in mind that the conversion between scale and resolution uses the WMTS conversion factor of approx. 111319 in case of degree based coordinate systems (that&#8217;s important so the envelope is calculated correctly).</p>
</div>
</div>
<div class="section" id="geotiff-tile-store">
<h2>7.2. GeoTIFF tile store<a class="headerlink" href="#geotiff-tile-store" title="Permalink to this headline">¶</a></h2>
<p>The GeoTIFF tile store can be used to configure tile data sets based on GeoTIFF/BIGTIFF files. The tile store is currently read-only. The requirements for the GeoTIFFs are:</p>
<ul class="simple">
<li>it must be created as BIGTIFF (eg. with GDAL using the <tt class="docutils literal"><span class="pre">-co</span> <span class="pre">BIGTIFF=YES</span></tt> option)</li>
<li>it must be created as a tiled tiff (eg. with GDAL using the <tt class="docutils literal"><span class="pre">-co</span> <span class="pre">TILED=YES</span></tt> option)</li>
<li>it can contain overviews (it is best to use a recent GDAL version &gt;= 1.8.0, where you can use <tt class="docutils literal"><span class="pre">GDAL_TIFF_OVR_BLOCKSIZE</span></tt> to specify the overview tile size)</li>
<li>it is recommended that the overviews contain the same tile size as the main level</li>
<li>it must contain the envelope as GeoTIFF tags in the tiff (don&#8217;t use world files)</li>
<li>it is recommended that the CRS is contained as GeoTIFF tag (but can be overridden in the tile matrix set config, see below)</li>
</ul>
<p>To make it easy to create a WMTS based on a GeoTIFF, a tile matrix set can be generated from the GeoTIFF structure, using the method described further down. But if you manage to generate your TIFF files to fit the structure of another matrix set it is just as well (the envelope of the GeoTIFF can be a subset of the tile matrix set&#8217;s envelope).</p>
<p>Let&#8217;s have a look at an example configuration:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;GeoTIFFTileStore</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/geotiff&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;TileDataSet&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>test<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;TileMatrixSetId&gt;</span>utah<span class="nt">&lt;/TileMatrixSetId&gt;</span>
    <span class="nt">&lt;File&gt;</span>../../data/test.tif<span class="nt">&lt;/File&gt;</span>
    <span class="nt">&lt;ImageFormat&gt;</span>image/png<span class="nt">&lt;/ImageFormat&gt;</span>
  <span class="nt">&lt;/TileDataSet&gt;</span>
...
<span class="nt">&lt;/GeoTIFFTileStore&gt;</span>
</pre></div>
</div>
<p>(You can define multiple tile data sets within one tile store.)</p>
<ul class="simple">
<li>The identifier is optional, and defaults to the base name of the file (in this example test.tif)</li>
<li>The tile matrix set id references the tile matrix set</li>
<li>obviously you need to point to the GeoTIFF file</li>
<li>The image format specifies the <em>output</em> image format, this is relevant if you use the tile store for a WMTS. The default is image/png.</li>
</ul>
<p>To generate a tile matrix set from the GeoTIFF, put a file into the datasources/tile/tilematrixset/ directory. See how it must look like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;GeoTIFFTileMatrixSet</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/tilematrixset/geotiff&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;StorageCRS&gt;</span>EPSG:26912<span class="nt">&lt;/StorageCRS&gt;</span>
  <span class="nt">&lt;File&gt;</span>../../../data/utah.tif<span class="nt">&lt;/File&gt;</span>
<span class="nt">&lt;/GeoTIFFTileMatrixSet&gt;</span>
</pre></div>
</div>
<p>The storage crs is optional if the file contains an appropriate GeoTIFF tag, but can be used to override it.</p>
</div>
<div class="section" id="file-system-tile-store">
<h2>7.3. File system tile store<a class="headerlink" href="#file-system-tile-store" title="Permalink to this headline">¶</a></h2>
<p>The file system tile store can be used to provide tiles from <a class="reference external" href="http://tilecache.org">tile cache</a> like directory hierarchies. This tile store is read-write.</p>
<p>Let&#8217;s explain the configuration using an example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;FileSystemTileStore</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/filesystem&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;TileDataSet&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>layer1<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;TileMatrixSetId&gt;</span>inspirecrs84quad<span class="nt">&lt;/TileMatrixSetId&gt;</span>
    <span class="nt">&lt;TileCacheDiskLayout&gt;</span>
      <span class="nt">&lt;LayerDirectory&gt;</span>../../data/tiles/layer1<span class="nt">&lt;/LayerDirectory&gt;</span>
      <span class="nt">&lt;FileType&gt;</span>png<span class="nt">&lt;/FileType&gt;</span>
    <span class="nt">&lt;/TileCacheDiskLayout&gt;</span>
  <span class="nt">&lt;/TileDataSet&gt;</span>
...
<span class="nt">&lt;/FileSystemTileStore&gt;</span>
</pre></div>
</div>
<p>(You can define multiple tile data sets within one tile store.)</p>
<ul class="simple">
<li>The identifier is optional, default is the layer directory base name</li>
<li>The tile matrix set id references the tile matrix set</li>
<li>Currently only the tile cache disk layout is supported. Just point to the layer directory and specify the file type of the images (png is recommended, but most image formats are supported)</li>
</ul>
<p>Please note that if you use external tools to seed the tile store, you need to make sure the resulting structure is compatible. The <tt class="docutils literal"><span class="pre">00</span></tt> directory corresponds to the <em>first</em> tile matrix of the referenced tile matrix set, <tt class="docutils literal"><span class="pre">01</span></tt> to the second tile matrix and so on.</p>
</div>
<div class="section" id="remote-wms-tile-store">
<h2>7.4. Remote WMS tile store<a class="headerlink" href="#remote-wms-tile-store" title="Permalink to this headline">¶</a></h2>
<p>The remote WMS tile store can be used to generate tiles on-the-fly from a WMS service. This tile store is read-only.</p>
<p>While you can configure multiple tile data sets in one remote WMS tile store configuration, they will all be based on one WMS.</p>
<p>Let&#8217;s have a look at an example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;RemoteWMSTileStore</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/remotewms&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;RemoteWMSId&gt;</span>wms1<span class="nt">&lt;/RemoteWMSId&gt;</span>

  <span class="nt">&lt;TileDataSet&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>satellite<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;TileMatrixSetId&gt;</span>inspirecrs84quad<span class="nt">&lt;/TileMatrixSetId&gt;</span>
    <span class="nt">&lt;OutputFormat&gt;</span>image/png<span class="nt">&lt;/OutputFormat&gt;</span>
    <span class="nt">&lt;RequestParams&gt;</span>
      <span class="nt">&lt;Layers&gt;</span>SatelliteProvo<span class="nt">&lt;/Layers&gt;</span>
      <span class="nt">&lt;Styles&gt;</span>default<span class="nt">&lt;/Styles&gt;</span>
      <span class="nt">&lt;Format&gt;</span>image/png<span class="nt">&lt;/Format&gt;</span>
      <span class="nt">&lt;CRS&gt;</span>EPSG:4326<span class="nt">&lt;/CRS&gt;</span>
    <span class="nt">&lt;/RequestParams&gt;</span>
  <span class="nt">&lt;/TileDataSet&gt;</span>
...
<span class="nt">&lt;/RemoteWMSTileStore&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>The remote wms id is mandatory, and must point to a WMS type remote ows resource</li>
<li>The identifier for the tile data sets is mandatory</li>
<li>The tile matrix set id references the tile matrix set</li>
<li>The output format is relevant if you use this tile data set in a WMTS</li>
<li>The request params section specifies parameters to be used in the GetMap requests sent to the WMS:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>The layers parameter can be used to specify one or more (comma separated) layers to request</li>
<li>The styles parameter must correspond to the layers parameter (works the same like GetMap)</li>
<li>The format parameter specifies the image format to request from the WMS</li>
<li>The CRS parameter specifies which CRS to use when requesting</li>
</ul>
</div></blockquote>
<p>Additionally you can specify default and override values for request parameters within the request params block. Just add <tt class="docutils literal"><span class="pre">Parameter</span></tt> tags as described in the <a class="reference internal" href="layers.html#anchor-configuration-layer-request-options"><em>Request options</em></a> layer chapter. The replacing/defaulting currently only works when you configure a WMTS on top of this tile store. <tt class="docutils literal"><span class="pre">GetTile</span></tt> parameters are then mapped to <tt class="docutils literal"><span class="pre">GetMap</span></tt> requests to the backend, and <tt class="docutils literal"><span class="pre">GetFeatureInfo</span></tt> WMTS parameters to <tt class="docutils literal"><span class="pre">GetFeatureInfo</span></tt> WMS parameters on the backend.</p>
</div>
<div class="section" id="remote-wmts-tile-store">
<h2>7.5. Remote WMTS tile store<a class="headerlink" href="#remote-wmts-tile-store" title="Permalink to this headline">¶</a></h2>
<p>The remote WMTS tile store can be used to generate tiles on-the-fly from a WMTS service. This tile store is read-only.</p>
<p>While you can configure multiple tile data sets in one remote WMTS tile store configuration, they will all be based on one WMTS.</p>
<p>Let&#8217;s have a look at an example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;RemoteWMTSTileStore</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.deegree.org/datasource/tile/remotewmts&quot;</span> <span class="na">configVersion=</span><span class="s">&quot;3.2.0&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;RemoteWMTSId&gt;</span>wmts1<span class="nt">&lt;/RemoteWMTSId&gt;</span>

  <span class="nt">&lt;TileDataSet&gt;</span>
    <span class="nt">&lt;Identifier&gt;</span>satellite<span class="nt">&lt;/Identifier&gt;</span>
    <span class="nt">&lt;OutputFormat&gt;</span>image/png<span class="nt">&lt;/OutputFormat&gt;</span>
    <span class="nt">&lt;TileMatrixSetId&gt;</span>EPSG:4326<span class="nt">&lt;/TileMatrixSetId&gt;</span>
    <span class="nt">&lt;RequestParams&gt;</span>
      <span class="nt">&lt;Layer&gt;</span>SatelliteProvo<span class="nt">&lt;/Layer&gt;</span>
      <span class="nt">&lt;Style&gt;</span>default<span class="nt">&lt;/Style&gt;</span>
      <span class="nt">&lt;Format&gt;</span>image/png<span class="nt">&lt;/Format&gt;</span>
      <span class="nt">&lt;TileMatrixSet&gt;</span>EPSG:4326<span class="nt">&lt;/TileMatrixSet&gt;</span>
    <span class="nt">&lt;/RequestParams&gt;</span>
  <span class="nt">&lt;/TileDataSet&gt;</span>

<span class="nt">&lt;/RemoteWMTSTileStore&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>The remote WMTS id is mandatory, and must point to a WMTS type remote OWS resource</li>
<li>The identifier for the tile data sets is optional, defaults to the value of the Layer request parameter</li>
<li>The output format is relevant if you want to use this tile data set in a WMTS, defaults to the value of the Format request parameter</li>
<li>The tile matrix set id references the local tile matrix set you want to use, defaults to the value of the TileMatrixSet request parameter</li>
<li>The request params section specifies parameters to be used in the GetTile requests sent to the WMTS:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>The layer parameter specifies the layer name to request</li>
<li>The style parameter specifies the style name to request</li>
<li>The format parameter specifies the image format to request</li>
<li>The tile matrix set parameter specifies the tile matrix set to request</li>
</ul>
</div></blockquote>
<p>Please note that you need a locally configured tile matrix set that corresponds exactly to the tile matrix set of the remote WMTS. They need not have the same identifier(s) (just configure the TileMatrixSetId option if they differ), but the structure (coordinate system, tile size, number of tiles per matrix etc.) needs to be identical.</p>
<p>Additionally you can specify default and override values for request parameters within the request params block. Just add <tt class="docutils literal"><span class="pre">Parameter</span></tt> tags as described in the <a class="reference internal" href="layers.html#anchor-configuration-layer-request-options"><em>Request options</em></a> layer chapter. The replacing/defaulting currently only works when you configure a WMTS on top of this tile store. Please note that the <tt class="docutils literal"><span class="pre">scope</span></tt> attribute allows <tt class="docutils literal"><span class="pre">GetTile</span></tt> and <tt class="docutils literal"><span class="pre">GetFeatureInfo</span></tt>, as <tt class="docutils literal"><span class="pre">GetMap</span></tt> is not supported by WMTS services.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, The deegree project.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>